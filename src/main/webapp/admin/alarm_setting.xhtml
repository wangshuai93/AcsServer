<ui:composition template="default_settings.xhtml"         xmlns="http://www.w3.org/1999/xhtml"         xmlns:f="http://java.sun.com/jsf/core"         xmlns:ui="http://java.sun.com/jsf/facelets"         xmlns:h="http://java.sun.com/jsf/html"         xmlns:my="http://java.sun.com/jsf/composite/components"         xmlns:rich="http://richfaces.org/rich">     <ui:define name="centercontent">		<!-- begin #content -->		<div id="content" class="content margin_left_220px content-margin-top">			<!-- begin breadcrumb -->			<ol class="breadcrumb f-s-14">				<li>系统设置</li>				<li class="active">告警设置</li>			</ol>			<!-- begin row -->			<div class="row">				<!-- begin col-12 -->				<div class="col-md-12">					<!-- begin panel -->					<div class="panel panel-inverse">						<div class="panel-heading"  >							<div class="panel-heading-btn">								<a href="javascript:;"									class="btn btn-xs btn-icon btn-circle btn-default"									data-click="panel-expand"><i class="fa fa-expand"></i></a> <a									href="javascript:;"									class="btn btn-xs btn-icon btn-circle btn-success"									data-click="panel-reload"><i class="fa fa-repeat"></i></a> <a									href="javascript:;"									class="btn btn-xs btn-icon btn-circle btn-warning"									data-click="panel-collapse"><i class="fa fa-minus"></i></a> <a									href="javascript:;"									class="btn btn-xs btn-icon btn-circle btn-danger"									data-click="panel-remove"><i class="fa fa-times"></i></a>							</div>							<h4 class="panel-title">告警设置</h4>						</div>                        <div class="panel-body">						    <h:form prependId="false">								<!-- <p id="p_operator_message" style="display: none;">#{thresholdvalueController.m_message}</p>								<p></p> -->																<div class="table-responsive">                                 	<table style="margin-top: 1%;">									    <tr>										    <td style="color: #242a30;">选择任务:</td>										    <td>										    	<h:selectOneMenu id="all_task" class="form-control" style="height: 22px; width: 100%; 										    		margin-left: 6px; padding-left: 12px; padding-top: 1px; padding-bottom: 1px;"													value="#{thresholdvalueController.task_id}" 													valueChangeListener="#{thresholdvalueController.getSettingParam}" immediate="true">															<f:ajax  render="table_information all_task" event="valueChange"  immediate="true" />														<f:selectItem itemLabel="" itemValue=""/>																		    <f:selectItems id="task_list" value="#{thresholdvalueController.m_allTask}" 										        		var="p" itemLabel="#{p.ch_name}" itemValue="#{p.m_id}" />										         </h:selectOneMenu> 										    </td>										</tr>									</table>																		<div class="table-responsive">										<p id="p_operator_message" style="display: none;">#{thresholdvalueController.m_message}</p>										<p></p>			                    										<h:outputLabel value="所有参数" style="margin-top: 1%;"/>										<h:dataTable id="table_information" var="bean"											value="#{thresholdvalueController.m_nodeParamsList}"											styleClass="table table-striped table-bordered nowrap">											<tr class="odd gradeX">													<h:column>													<f:facet name="header">序号</f:facet>											        #{bean.m_rowId}										        </h:column>												<h:column>													<f:facet name="header">参数路径</f:facet>										 	        #{bean.node_path}								      			  	        </h:column> 					      			  	        <h:column>													<f:facet name="header">参数值类型</f:facet>										 	        #{bean.value_type}								      			  	        </h:column>					   			     	        <h:column>													<f:facet name="header">参数值范围</f:facet>					   			     	        	<h:panelGroup rendered="#{bean.value_type == 'enum'}">						    			                #{bean.other_value} 					    			                </h:panelGroup>					    			                <h:panelGroup rendered="#{bean.value_type == 'basic'}">						    			                #{bean.min_value}~#{bean.max_value}  					    			                </h:panelGroup>					   			     	        </h:column>	                                            <h:column>													<f:facet name="header">操作</f:facet>													<h:panelGroup rendered="#{bean.value_type == 'basic'}">														<a href="javascript: goToSetAlarmThreshold('#{bean.id}', '#{bean.abbr_name}', '#{bean.min_value}', 															'#{bean.max_value}')"  style="color: black; margin-left: 5%;">设置阀值</a>													</h:panelGroup>													<h:panelGroup rendered="#{bean.value_type == 'enum'}">														<a href="javascript: goToSetAlarmThresholdParam('#{bean.id}')"  															style="color: black; margin-left: 5%;">设置参数范围</a>													</h:panelGroup>																							        </h:column>																						</tr>										</h:dataTable>									</div>																			<!-- <input type="hidden" name="load" value="lazy"/> -->									<input type="hidden" id="hidden_node_id" name="node_id" />					                					                <div class="table-responsive">										<h:outputLabel value="已设置参数" style="margin-top: 3%;"/>										<h:dataTable id="table_set_information" var="bean"											value="#{thresholdvalueController.m_thresholdList}"											styleClass="table table-striped table-bordered nowrap">											<tr class="odd gradeX">													<h:column>													<f:facet name="header">序号</f:facet>											        #{bean.m_rowId}										        </h:column>										        <h:column>													<f:facet name="header">参数路径</f:facet>					  			                    #{bean.nodeModel.node_path}					 				            </h:column>					      			  	        <h:column>													<f:facet name="header">参数值类型</f:facet>										 	        #{bean.value_type}								      			  	        </h:column>					      			  	        <h:column>													<f:facet name="header">参数值范围</f:facet>					   			     	        	<h:panelGroup rendered="#{bean.value_type == 'enum'}">						    			                #{bean.value} 					    			                </h:panelGroup>					    			                <h:panelGroup rendered="#{bean.value_type == 'basic'}">						    			                #{bean.min_value}~#{bean.max_value}  					    			                </h:panelGroup>					   			     	        </h:column>	                                            <h:column>													<f:facet name="header">操作</f:facet>													<a href="javascript: goTodeleteHasSetParam('#{bean.nodeModel.m_id}')"  style="color: black;">移除</a>										        </h:column>																						</tr>										</h:dataTable>									</div>						                <div>										<h:commandButton action="#{thresholdvalueController.setAlarmThreshold()}"											value="保存" style="float: right; width:50px; height:28px; margin-right: 10px;"/>									</div>								</div> 					            <h:commandButton action="#{thresholdvalueController.removeThreshold}" value="移除已设置参数" style="display:none;"/>					            <h:commandButton action="#{thresholdvalueController.setThresholdEnum}" value="添加到设置参数列表" style="display:none;"	/>		                        								<!-- 阀值设置弹窗 -->								<div id="putout" class="putout panel panel-primary">									<div class="panel-heading">设置阀值</div>									<div class="panel-body">										<div class="form-group">											<h:outputLabel style="padding-left: 50px;" value="参数名称:" />											<h:outputText id="set_param_name" style="margin-left: 10px;" value=""/>										</div>																				<div class="form-group">											<h:outputLabel style="padding-left: 50px;" value="阀值最小值:" />											<h:inputText id="set_min_value" style="margin-left: 5px; width:100px; height: 22px; text-align: center;" 												value="#{thresholdvalueController.m_thresholdBean.min_value}" />										</div>																				<div class="form-group">											<h:outputLabel style="padding-left: 50px;" value="阀值最大值:" />											<h:inputText id="set_max_value" style="margin-left: 5px; width:100px; height: 22px; text-align: center;"												value="#{thresholdvalueController.m_thresholdBean.max_value}"/>										</div>										  										<div class="form-group">											<input type="button" style="background:#337ab7;width:50px; height:28px; 												margin-top: 20px; margin-left: 60px; color:#fff;" 												onclick="closeUpdateWindow()" value="取消" />																	<input type="button" onclick="setTempAlarmThreshold()" style="background:#337ab7; color:#fff;												width:50px; height:28px; margin-top: 20px; margin-left: 80px;" value="确定"/>										</div>										<input type="hidden" name="window_node_id" id="window_node_id"/>									</div>								</div>																<h:commandButton action="#{thresholdvalueController.setTempAlarmThreshold}" value="添加到已设置列表"  style="display: none;"/>		                        						   </h:form>						</div>					</div>										<!-- end panel -->				</div>				<!-- end col-10 -->			</div>			<!-- end row -->				<div class="invoice-footer text-muted">                    <p class="text-center m-b-5">                        	欢迎访问本系统                     V_2017.8.30                    </p>                </div>		</div>		<!-- end #content -->    </ui:define>	<ui:define name="js_content2">		<script type="text/javascript">			$(document).ready(function() {	    		if ($("[id$='logout']").val() =='否') {	    			$("[id$='time']").attr("readonly","true");				}				var minValue;				var maxValue;				$("#system_settings").css('color', '#0090FF');	    		$("#li_1").css('color', '#88AEF1');	    		$("#li_2").css('color', '#0090FF');	    		$("#li_3").css('color', '#88AEF1');	    		$("#li_4").css('color', '#88AEF1');	    		$("#li_5").css('color', '#88AEF1');	    		$("#li_6").css('color', '#88AEF1');	    	});	    	function goTodeleteHasSetParam(node_id){	    		$("#hidden_node_id").attr("value",node_id);		    		$(":submit[value='移除已设置参数']").each(function(){					$(this).click();				});			}	    	function goToSetAlarmThreshold(node_id, node_name, min_value, max_value){	    		document.getElementById("putout").style.visibility = "visible";	    		document.getElementById("set_param_name").innerHTML = node_name;	    		document.getElementById("window_node_id").value = node_id;	    		$(document.getElementById("set_min_value")).val("");	    		$(document.getElementById("set_max_value")).val("");	    		minValue = min_value;	    		maxValue = max_value;		    }			    		   function goToSetAlarmThresholdParam(node_id){			   $("#hidden_node_id").attr("value",node_id);				   $(":submit[value='添加到设置参数列表']").each(function(){					$(this).click();				});		   }	    	function closeUpdateWindow() {				document.getElementById("putout").style.visibility = "hidden";			}			function setTempAlarmThreshold(){				var min_value = $(document.getElementById("set_min_value")).val();				var max_value = $(document.getElementById("set_max_value")).val();				if(minValue != "" &amp;&amp; maxValue != ""){					console.info("start min_value=" + min_value + "; max_value = " + max_value);					minValue = parseInt(minValue);					maxValue = parseInt(maxValue);					if(min_value != "" &amp;&amp; max_value != ""){						min_value = parseInt(min_value);						max_value = parseInt(max_value);						console.info("ttttttt");					}else{						showTipsMessage("请填写值！");						return;					}					console.info("minValue = " + minValue + "; maxValue = " + maxValue);					console.info("min_value=" + min_value + "; max_value = " + max_value);					if(minValue > min_value || max_value > maxValue){						showTipsMessage("请填写最大值与最小值之间的值！");						return;					}										if(min_value > max_value){						showTipsMessage("最大值不能小于最小值！");						return;					}					$(":submit[value='添加到已设置列表']").each(function(){						$(this).click();					});				}			}			function showTipsMessage(tips){	    		$.msgbox({	    			title : '提示',	    			type : 'alert',	    			content : tips,	    			icons: ['min', 'max', 'close'],	        		id: 0,    				buttons: ['确定'],	                    buttonEvents: {                        '确定': function() {                            $.msgbox.closeAll();                            $(document.getElementById("set_min_value")).val("");                            $(document.getElementById("set_max_value")).val("");                        }                    }	    		});	    		//确认弹窗的内容的刷新	            var msgbox = $.msgbox(0)	            if (msgbox) msgbox.content(tips);		   }		</script>    </ui:define></ui:composition>